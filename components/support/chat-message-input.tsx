"use client";
import React, { useState } from 'react';

interface MessageInputProps {
  onSendMessage?: (message: string) => void;
  placeholder?: string;
}

export function MessageInput({ onSendMessage, placeholder = "Type message..." }: MessageInputProps) {
  const [message, setMessage] = useState('');

  const handleSend = () => {
    if (message.trim() && onSendMessage) {
      onSendMessage(message.trim());
      setMessage('');
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSend();
    }
  };

  return (
    <div className="box-border flex absolute justify-between items-center pt-2 pr-2 pb-1.5 pl-2 rounded-md border border-solid border-neutral-500 h-[50px] left-[18px] top-[600px] w-[609px] max-md:relative max-md:top-auto max-md:mt-5 max-md:inset-x-[18px] max-md:w-[calc(100%_-_36px)] max-sm:left-3 max-sm:p-1.5 max-sm:h-11 max-sm:w-[calc(100%_-_24px)]">
      <input
        type="text"
        value={message}
        onChange={(e) => setMessage(e.target.value)}
        onKeyPress={handleKeyPress}
        placeholder={placeholder}
        className="flex-1 bg-transparent border-none outline-none text-xs text-neutral-700 placeholder-neutral-400 max-sm:text-xs"
      />

      <div className="flex absolute right-2 gap-4 items-center h-9 top-[7px] w-[100px] max-sm:top-1.5 max-sm:right-1.5 max-sm:gap-3">
        <div className="flex relative gap-3 items-start max-sm:gap-2">
          <button type="button" aria-label="Attach file">
            <div
              dangerouslySetInnerHTML={{
                __html:
                  "<svg layer-name=\"file/3\" width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"attachment-icon\" style=\"width: 16px; height: 16px; position: relative\"> <g clip-path=\"url(#clip0_attachment)\"> <path d=\"M13.1878 2.20067L13.6333 1.97367V1.97367L13.1878 2.20067ZM11.1998 1.47266V1.97266H11.1998L11.1998 1.47266ZM12.6052 1.61798L12.8322 1.17248L12.8322 1.17248L12.6052 1.61798ZM12.6052 14.6607L12.8322 15.1062H12.8322L12.6052 14.6607ZM13.1878 14.078L13.6333 14.305V14.305L13.1878 14.078ZM3.39452 14.6607L3.16752 15.1062L3.16752 15.1062L3.39452 14.6607ZM2.81183 14.078L3.25733 13.851H3.25733L2.81183 14.078ZM3.05703 5.74877L2.70348 5.39521H2.70348L3.05703 5.74877ZM6.94265 1.86318L6.58909 1.50962V1.50962L6.94265 1.86318ZM4.79984 15.306H11.1998V14.306H4.79984V15.306ZM13.8332 12.6727V3.60599H12.8332V12.6727H13.8332ZM13.8332 3.60599C13.8332 3.24087 13.8336 2.93696 13.8133 2.68954C13.7927 2.43629 13.7479 2.19851 13.6333 1.97367L12.7423 2.42766C12.7731 2.48804 12.801 2.57956 12.8167 2.77098C12.8328 2.96823 12.8332 3.22437 12.8332 3.60599H13.8332ZM11.1998 1.97266C11.5815 1.97266 11.8376 1.97305 12.0349 1.98916C12.2263 2.0048 12.3178 2.03272 12.3782 2.06348L12.8322 1.17248C12.6073 1.05791 12.3695 1.01317 12.1163 0.992482C11.8689 0.972267 11.565 0.972656 11.1998 0.972656L11.1998 1.97266ZM13.6333 1.97367C13.4576 1.62871 13.1771 1.34825 12.8322 1.17248L12.3782 2.06348C12.535 2.14338 12.6624 2.27086 12.7423 2.42766L13.6333 1.97367ZM11.1998 15.306C11.565 15.306 11.8689 15.3064 12.1163 15.2862C12.3695 15.2655 12.6073 15.2207 12.8322 15.1062L12.3782 14.2152C12.3178 14.2459 12.2263 14.2738 12.0349 14.2895C11.8376 14.3056 11.5815 14.306 11.1998 14.306V15.306ZM12.8332 12.6727C12.8332 13.0543 12.8328 13.3104 12.8167 13.5077C12.801 13.6991 12.7731 13.7906 12.7423 13.851L13.6333 14.305C13.7479 14.0801 13.7927 13.8424 13.8133 13.5891C13.8336 13.3417 13.8332 13.0378 13.8332 12.6727H12.8332ZM12.8322 15.1062C13.1771 14.9304 13.4576 14.6499 13.6333 14.305L12.7423 13.851C12.6624 14.0078 12.535 14.1353 12.3782 14.2152L12.8322 15.1062ZM4.79984 14.306C4.41823 14.306 4.16208 14.3056 3.96483 14.2895C3.77341 14.2738 3.68188 14.2459 3.62151 14.2152L3.16752 15.1062C3.39236 15.2207 3.63014 15.2655 3.8834 15.2862C4.13082 15.3064 4.43473 15.306 4.79984 15.306V14.306ZM2.1665 12.6727C2.1665 13.0378 2.16612 13.3417 2.18633 13.5891C2.20702 13.8424 2.25176 14.0801 2.36633 14.305L3.25733 13.851C3.22657 13.7906 3.19865 13.6991 3.18301 13.5077C3.16689 13.3104 3.1665 13.0543 3.1665 12.6727H2.1665ZM3.62151 14.2152C3.46471 14.1353 3.33723 14.0078 3.25733 13.851L2.36633 14.305C2.54209 14.6499 2.82256 14.9304 3.16752 15.1062L3.62151 14.2152ZM2.1665 6.69158V12.6727H3.1665V6.69158H2.1665ZM11.1998 0.972656H7.88545V1.97266H11.1998V0.972656ZM3.41058 6.10232L7.2962 2.21673L6.58909 1.50962L2.70348 5.39521L3.41058 6.10232ZM3.33317 6.63932H6.61522V5.63932H3.33317V6.63932ZM7.83317 5.42137V2.13932H6.83317V5.42137H7.83317ZM6.61522 6.63932C7.28788 6.63932 7.83317 6.09402 7.83317 5.42137H6.83317C6.83317 5.54175 6.73559 5.63932 6.61522 5.63932V6.63932ZM7.88545 0.972656C7.62092 0.972656 7.36226 1.02984 7.12607 1.13732L7.54027 2.04751C7.64767 1.99863 7.76521 1.97266 7.88545 1.97266V0.972656ZM7.12607 1.13732C6.92811 1.22741 6.74585 1.35287 6.58909 1.50962L7.2962 2.21673C7.36746 2.14547 7.45027 2.08846 7.54027 2.04751L7.12607 1.13732ZM7.83317 2.13932V1.59241H6.83317V2.13932H7.83317ZM3.1665 6.69158C3.1665 6.57135 3.19248 6.45381 3.24135 6.34641L2.33115 5.93223C2.22368 6.16842 2.1665 6.42706 2.1665 6.69158H3.1665ZM3.24135 6.34641C3.28231 6.25641 3.33931 6.17359 3.41058 6.10232L2.70348 5.39521C2.54671 5.55198 2.42124 5.73425 2.33115 5.93223L3.24135 6.34641ZM3.33317 5.63932H2.78625V6.63932H3.33317V5.63932Z\" fill=\"#6F6E6D\"></path> </g> <defs> <clipPath id=\"clip0_attachment\"> <rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(0 0.140625)\"></rect> </clipPath> </defs> </svg>",
              }}
            />
          </button>
          <button type="button" aria-label="Attach photo">
            <div
              dangerouslySetInnerHTML={{
                __html:
                  "<svg layer-name=\"photo\" width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"photo-icon\" style=\"width: 16px; height: 16px; position: relative\"> <path d=\"M0.666504 6.80859L8.86177 15.0039C9.12211 15.2642 9.54423 15.2642 9.80457 15.0039L15.3332 9.47526M4.6665 10.1419L7.52843 7.28C7.78878 7.01965 8.21089 7.01965 8.47124 7.28L12.6665 11.4753M11.7497 3.89189H12.2497M11.7497 4.39189H12.2497M5.99984 15.4753H9.99984C11.8667 15.4753 12.8001 15.4753 13.5131 15.1119C14.1403 14.7924 14.6503 14.2824 14.9699 13.6552C15.3332 12.9422 15.3332 12.0088 15.3332 10.1419V6.14193C15.3332 4.27509 15.3332 3.34166 14.9699 2.62863C14.6503 2.00142 14.1403 1.49148 13.5131 1.17191C12.8001 0.808594 11.8667 0.808594 9.99984 0.808594H5.99984C4.133 0.808594 3.19957 0.808594 2.48654 1.17191C1.85933 1.49148 1.34939 2.00142 1.02982 2.62863C0.666504 3.34166 0.666504 4.27509 0.666504 6.14193V10.1419C0.666504 12.0088 0.666504 12.9422 1.02982 13.6552C1.34939 14.2824 1.85933 14.7924 2.48654 15.1119C3.19957 15.4753 4.133 15.4753 5.99984 15.4753ZM12.6665 4.14193C12.6665 4.51012 12.368 4.80859 11.9998 4.80859C11.6316 4.80859 11.3332 4.51012 11.3332 4.14193C11.3332 3.77374 11.6316 3.47526 11.9998 3.47526C12.368 3.47526 12.6665 3.77374 12.6665 4.14193Z\" stroke=\"#6F6E6D\" stroke-linecap=\"round\"></path> </svg>",
              }}
            />
          </button>
        </div>
        <button
          type="button"
          onClick={handleSend}
          className="flex relative gap-2.5 items-start px-1.5 py-1 bg-amber-400 rounded max-sm:px-1.5 max-sm:py-1"
          aria-label="Send message"
        >
          <div
            dangerouslySetInnerHTML={{
              __html:
                "<svg layer-name=\"send\" width=\"29\" height=\"29\" viewBox=\"0 0 29 29\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"send-icon\" style=\"width: 20px; height: 20px; transform: rotate(-45deg); position: relative\"> <path d=\"M11.7852 16.4963L14.1422 14.1393M11.34 16.3691L6.12564 14.8793C5.33784 14.6542 5.31377 13.5465 6.09105 13.2874L17.8643 9.36301C18.5158 9.14586 19.1356 9.76564 18.9184 10.4171L14.994 22.1904C14.7349 22.9677 13.6273 22.9436 13.4022 22.1558L11.9123 16.9414C11.8332 16.6646 11.6168 16.4482 11.34 16.3691Z\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path> </svg>",
            }}
          />
        </button>
      </div>
    </div>
  );
}
